<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title><%= title %></title>
  <link rel="stylesheet" type="text/css" href="/css/main.css">
</head>
<body>
<div class="container">
<% if(urlList.length) { %>
  <% urlList.forEach(function(url) { %>
    <div class="item">
    <!-- <span class="remove">&#38;#10006;</span> -->
    <span class="remove"><img src="img/remove.png"/></span>
<!--    <a href="<%= url[1] %>" target="_blank" name="<%= url[0] %>" id="<%= url[0] %>"><%= unescape(url[2]) %></a> -->
        <a href="<%= url.url %>" target="_blank" name="<%= url._id %>" id="<%= url._id %>"><%= unescape(url.title) %></a>
      <br>
  </div>
  <% }); %>
    <button class="clear-all">Delete All</button>
<% } else { %>
  <!-- <h3>Nothing to see here. Move along!</h3> -->
<% } %>
</div>
<script type="text/javascript">
  var clearAll = document.getElementsByClassName('clear-all')[0];
  clearAll.addEventListener('click', function(event) {
    httpGet(window.location.href + "clear");
    location.reload();
  });

  var remove = Array.prototype.slice.call(document.getElementsByClassName('remove'));
  remove.forEach(function(el) {
  // Add event listener
    el.addEventListener('click', function(event) {
      var toRemove = window.location.href + "remove?item=" + el.parentElement.children[1].id;
      //var toRemove = window.location.href + "remove?item=" + el.parentElement.children[1].name;
      httpGet(toRemove);
      location.reload();
    });
  });
function httpGet(theUrl)
{
    var xmlHttp = null;

    xmlHttp = new XMLHttpRequest();
    xmlHttp.open( "GET", theUrl, false );
    xmlHttp.send( null );
    return xmlHttp.responseText;
}
</script>
</body>
</html>
